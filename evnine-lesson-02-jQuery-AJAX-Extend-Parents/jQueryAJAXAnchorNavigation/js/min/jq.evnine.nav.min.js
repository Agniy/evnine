new function(a,b,c){jQuery.evNav=function(d){$EVNINE_VER="0.3";$EVNINE_NAME="evNav.";var p=jQuery.extend({debugToConsole:false,debugPrefixString:"|	",debugToConsoleNotSupport:false,debugFunctionGroup:false,scrollToTopAfterAJAXCall:true,liveSelectorForAJAX:"a, input:submit",liveBindType:"click",crossBrowserMinimumVersion:{msie:"8"},folowByChangeOfHistory:true,maxErrorCountBeforeStopAJAXCall:3,selectorForAJAXReplace:"body",scriptForAJAXCallAndSetAnchore:"/index.php",ancorePreFix:"!",isHREFMatchThisRegExpSetNoUseAJAX:"^http://",ifAJAXAddThisParamToScript:"ajax=ajax",isHREFMatchThisRegExpSetSEFMode:".html$",ifSEFAJAXReplaceHREFMatchTo:".ajax",functionsForAJAXIndicator:c,setJSFuncForLoadPage:c},d);if(d!=c){p.loadAJAXOptions=jQuery.extend({success:i,error:v,dataType:"html"},d.loadAJAXOptions);if(d.loadAJAXOptions.error!=c){p.loadAJAXOptions.error_for_options=d.loadAJAXOptions.error;p.loadAJAXOptions.error=function(x,y){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,1)+$EVNINE_NAME+"$options.loadAJAXOptions.error_for_options() BEGIN")}try{p.loadAJAXOptions.error_for_options(x,y,p)}catch(w){if(p.debugToConsole){console.error(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"setJSFuncForHREF(): try{...} catch(){"+w+"}")}}if(typeof p.functionsForAJAXIndicator.Off==="function"){p.functionsForAJAXIndicator.Off(p)}p.$ajax_is_load=false;if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,1)+$EVNINE_NAME+"$options.loadAJAXOptions.error_for_options() END")}}}if(d.loadAJAXOptions.success!=c){p.loadAJAXOptions.success=function(x,y){p.loadAJAXOptions.success_for_options=d.loadAJAXOptions.success;try{if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,0)+$EVNINE_NAME+"$options.loadAJAXOptions.success_for_options() BEGIN")}p.loadAJAXOptions.success_for_options(x,y,p)}catch(w){if(p.debugToConsole){console.error(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"setJSFuncForHREF(): try{...} catch(){"+w+"}")}}if(typeof p.functionsForAJAXIndicator.Off==="function"){p.functionsForAJAXIndicator.Off(p)}if(p.scrollToTopAfterAJAXCall){jQuery("html,body").scrollTop(0)}p.$ajax_is_load=false;if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,0)+$EVNINE_NAME+"$options.loadAJAXOptions.success_for_options() END")}}}}p.$loaded_href_hash_fix="";p.$loaded_href="";p.$ajax_is_load=false;if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,0)+$EVNINE_NAME+"call BEGIN")}p.flag_ev_func;if(p.setJSFuncForLoadPage==c){p.flag_ev_func=false}else{p.flag_ev_func=true}if(p.debugToConsole){if(!window.console||jQuery.evDev==c){p.debugToConsole=false}else{jQuery.evDev.initNotSupport()}if(p.debugFunctionGroup){p.debugPrefixString="";jQuery.evDev.initGroupFunctionCall(p.debugToConsoleNotSupport)}}function l(w){return parseInt(parseFloat(w),"10")}function r(w){return w.replace(/^ +/g,"").replace(/ +$/g,"")}p.scriptNameForAJAX=p.scriptForAJAXCallAndSetAnchore.replace(/^.*(\\|\/|\:)/,"");function k(){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,1)+$EVNINE_NAME+"isHasCrossBrowserMinimumVersion() BEGIN")}var x=navigator.userAgent.toLowerCase();jQuery.browser={version:(x.match(/.+(?:rv|it|ra|ie|me)[\/: ]([\d.]+)/)||[])[1],chrome:(/chrome/).test(x),safari:(/webkit/).test(x)&&!(/chrome/).test(x),opera:(/opera/).test(x),msie:(/msie/).test(x)&&!(/opera/).test(x),mozilla:(/mozilla/).test(x)&&!(/(compatible|webkit)/).test(x)};var w=true;jQuery.each(p.crossBrowserMinimumVersion,function(y,z){if(jQuery.browser[y]){if(l(jQuery.browser.version)>=z){if(p.debugToConsole){console.warn("#getInt(jQuery.browser.version): "+l(jQuery.browser.version))}if(p.debugToConsole){console.warn("#$version: "+z)}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,2)+$EVNINE_NAME+"isHasCrossBrowserMinimumVersion return true")}w=true;return""}else{if(p.debugToConsole){console.warn("#getInt(jQuery.browser.version): "+l(jQuery.browser.version))}if(p.debugToConsole){console.warn("#$version: "+z)}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,2)+$EVNINE_NAME+"isHasCrossBrowserMinimumVersion return false")}w=false;return""}}});if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,1)+$EVNINE_NAME+"isHasCrossBrowserMinimumVersion() END")}return w}p.isAllowThisBrowser=k();if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,1)+$EVNINE_NAME+"$options.isAllowThisBrowser="+p.isAllowThisBrowser)}function h(w){return w.replace(/(["'\.\-])(?:(?=(\\?))\2.)*?\1/g,"")}function m(w){if(jQuery(w).attr("href")!=c){$href=jQuery(w).attr("href");if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,3)+$EVNINE_NAME+"getClickHref $href: "+$href)}$reg=new RegExp(p.isHREFMatchThisRegExpSetNoUseAJAX,"g");if($href.match($reg)){if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"getClickHref is no ajax href")}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"getClickHref match $options.isHREFMatchThisRegExpSetNoUseAJAX")}return true}else{o($href);if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"getClickHref is ajax href")}}}else{if(jQuery(w).attr("type")==="submit"){if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"getClickHref is ajax submit")}s(w)}}return false}function q(y,w,x){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,7)+$EVNINE_NAME+"getURLWithFlag() BEGIN")}if(y===""){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,7)+$EVNINE_NAME+"getURLWithFlag() END")}return"?"+w}$reg=new RegExp(p.isHREFMatchThisRegExpSetSEFMode,"g");if(y.match($reg)){if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,8)+$EVNINE_NAME+"getURLWithFlag match SEF ")}if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,7)+$EVNINE_NAME+"getURLWithFlag() END")}return y.replace($reg,x)}else{if(y.match(/\?/)){if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,8)+$EVNINE_NAME+"getURLWithFlag match & ")}if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,7)+$EVNINE_NAME+"getURLWithFlag() END")}return y+"&"+w}else{if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,8)+$EVNINE_NAME+"getURLWithFlag match ? ")}if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,7)+$EVNINE_NAME+"getURLWithFlag() END")}return y+"?"+w}}}function u(){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,7)+$EVNINE_NAME+"isURLBaseAJAX() BEGIN")}if(location.search!==""){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,7)+$EVNINE_NAME+"isURLBaseAJAX() END return false")}return false}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,8)+$EVNINE_NAME+"isURLBaseAJAX.$options.scriptForAJAXCallAndSetAnchore="+p.scriptForAJAXCallAndSetAnchore)}if(location.pathname===p.scriptForAJAXCallAndSetAnchore){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,7)+$EVNINE_NAME+"isURLBaseAJAX() END return true")}return true}else{if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,7)+$EVNINE_NAME+"isURLBaseAJAX() END return false")}return false}}function f(w,x){$reg=new RegExp("^"+p.scriptNameForAJAX+"|^"+p.scriptForAJAXCallAndSetAnchore+"|\\?");x=x.replace($reg,"");if(p.isAllowThisBrowser){window.location=w+"#"+p.ancorePreFix+x}else{window.location=w+x}}function t(w){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,7)+$EVNINE_NAME+"setURLToHashAndLocation($href="+w+")")}if(w==="/"){p.$loaded_href_hash_fix="";window.location.hash=b.URLDecode(p.ancorePreFix);if(p.debugToConsole){a.title=""}return p.scriptForAJAXCallAndSetAnchore}else{$reg=new RegExp("^"+p.scriptNameForAJAX+"|^"+p.scriptForAJAXCallAndSetAnchore);p.$loaded_href_hash_fix=$hash_href_without_script_name=w.replace($reg,"");if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,8)+$EVNINE_NAME+"setURLToHashAndLocation.hash_href_without_script_name="+$hash_href_without_script_name)}window.location.hash=b.URLDecode(p.ancorePreFix+$hash_href_without_script_name);if(p.debugToConsole){a.title=w}return w}}function e(x,w){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,2)+$EVNINE_NAME+"setMethodTOURL() BEGIN")}if(w.length===0){return x}else{$reg=new RegExp(p.isHREFMatchThisRegExpSetSEFMode,"g");if(x.match($reg)){x=x.substring(1);$method_replace=x.match(/.*\//);$method_replace=$method_replace.toString().split(/\//);if($method_replace[1].match(/=/)){$method_match==$method_replace[0]+"/";w="/"+$method_replace[0]+"/"+w}else{$method_match=$method_replace[1]}x=x.replace($method_match,w)}else{$method_match=x.match(/&m=.*/);x=x.replace($method_match,"&m="+w)}if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,2)+$EVNINE_NAME+"setMethodTOURL() END")}return x}}function s(w){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"getAJAXSubmit")}$method=jQuery(w).attr("name");$form=jQuery(w).parents("form");$length=$method.length;if($length>6){$method=$method.substring(7,$length-1);p.loadAJAXOptions.data={submit:$method};$href=e($form.attr("action"),$method)}else{$href=e($form.attr("action"),$method);p.loadAJAXOptions.data=""}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"getAJAXSubmit.$options.loadAJAXOptions.data: "+p.loadAJAXOptions.data)}$id=$form.attr("id");if($id!=c){$id="tmp_"+Math.floor(Math.random()*100);$form.attr("id",$id)}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,5)+$EVNINE_NAME+"getAJAXSubmit.$id="+$id)}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,5)+$EVNINE_NAME+"getAJAXSubmit.$href="+$href)}g($href,"submit",$id,0)}function o(w){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"getAJAXHref () BEGIN")}g(w,"href","",0);if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"getAJAXHref () END")}}function v(w,x){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,5)+$EVNINE_NAME+"showResponseError() BEGIN")}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,6)+$EVNINE_NAME+"showResponseError.responseText="+w)}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,6)+$EVNINE_NAME+"showResponseError.statusText="+x)}p.$ajax_is_load=false;if(typeof p.functionsForAJAXIndicator.Off==="function"){p.functionsForAJAXIndicator.Off(p)}if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,5)+$EVNINE_NAME+"showResponseError() END")}}function i(w,x){if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,5)+$EVNINE_NAME+"showResponse() BEGIN")}jQuery(p.selectorForAJAXReplace).html(w);p.$ajax_is_load=false;if(typeof p.functionsForAJAXIndicator.Off==="function"){p.functionsForAJAXIndicator.Off(p)}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,5)+$EVNINE_NAME+"showResponse() END")}}function g(z,w,y,A){if(A==c){A=0}if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,3)+$EVNINE_NAME+"getAJAX() BEGIN")}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"getAJAX.$options.$ajax_is_load="+p.$ajax_is_load)}if(!p.$ajax_is_load){if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"getAJAX.$options.loadAJAXOptions: ")}if(p.debugToConsole){jQuery.evDev.getTraceObject(p.loadAJAXOptions,jQuery.evDev.getTab(p.debugPrefixString,5))}try{if(u()){p.$ajax_is_load=true;p.$loaded_href=z;p.loadAJAXOptions.url=q(t(z),p.ifAJAXAddThisParamToScript,p.ifSEFAJAXReplaceHREFMatchTo);if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"getAJAX.$options.loadAJAXOptions.url="+p.loadAJAXOptions.url)}if(typeof p.functionsForAJAXIndicator.On==="function"){p.functionsForAJAXIndicator.On(p)}if(w==="submit"){b("#"+y).ajaxSubmit(p.loadAJAXOptions)}else{b.ajax(p.loadAJAXOptions)}}else{f(p.scriptForAJAXCallAndSetAnchore,z)}}catch(x){p.$ajax_is_load=false;if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,4)+$EVNINE_NAME+"getAJAX.$bug="+x)}p.$loaded_href="";A++;if(A<=p.maxErrorCountBeforeStopAJAXCall){g(z,w,y,A)}if(typeof p.functionsForAJAXIndicator.Off==="function"){p.functionsForAJAXIndicator.Off(p)}}}if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,3)+$EVNINE_NAME+"getAJAX() END")}}function n(w){w=w.toString();if(w.indexOf("#")!=-1){return w.substring(w.indexOf("#"))}else{return""}}function j(){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,1)+$EVNINE_NAME+"setAnchoreClearWithoutURL() BEGIN")}$href=n(location);$reg=new RegExp("^#"+p.ancorePreFix,"g");$href=$href.replace($reg,"");if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,2)+$EVNINE_NAME+"setAnchoreClearWithoutURL.$href_after_replace="+$href)}if($href){if(p.flag_ev_func){p.setJSFuncForLoadPage.$reload_page=true}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,2)+$EVNINE_NAME+"setAnchoreClearWithoutURL.$href: "+$href)}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,2)+$EVNINE_NAME+"setAnchoreClearWithoutURL.isURLBaseAJAX return true")}b(p.selectorForAJAXReplace).html();g(p.scriptForAJAXCallAndSetAnchore+$href,"href")}else{if(p.flag_ev_func&&!p.setJSFuncForLoadPage.$reload_page){p.setJSFuncForLoadPage.setMethodAndControllerFunc("init")}}if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,1)+$EVNINE_NAME+"setAnchoreClearWithoutURL() END")}}j();if(p.folowByChangeOfHistory&&p.isAllowThisBrowser){jQuery(window).trigger("hashchange");jQuery(window).bind("hashchange",function(){if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,0)+$EVNINE_NAME+"hashchange() BEGIN")}if(window.location.hash){$reg=new RegExp("^#"+p.ancorePreFix,"g");$hash=location.hash.replace($reg,"");if(p.$loaded_href_hash_fix!==$hash){if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,1)+$EVNINE_NAME+"hashchange=YES")}if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,1)+"|"+$hash+"|!=|"+p.$loaded_href_hash_fix+"|")}g($hash,"href")}else{if(p.debugToConsole){console.info(jQuery.evDev.getTab(p.debugPrefixString,1)+$EVNINE_NAME+"hashchange=NO")}}}if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,0)+$EVNINE_NAME+"hashchange() END")}})}if(p.debugToConsoleNotSupport){if(p.debugToConsole){console.warn("END")}}if(p.debugToConsole){console.warn(jQuery.evDev.getTab(p.debugPrefixString,0)+$EVNINE_NAME+"call END")}if(p.isAllowThisBrowser){return jQuery(p.liveSelectorForAJAX).live(p.liveBindType,function(){return m(this)})}}}(document,jQuery);